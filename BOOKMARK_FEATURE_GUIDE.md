# 标注功能使用指南

## 功能概述

Gemini Timeline Assistant 现在支持标注和笔记功能，让您可以将重要的问题标注并置顶显示，同时支持边缘停靠、拖拽定位和长按快速编辑，方便在同一URI的对话中快速找到关键问题。

## 主要功能

### 1. 问题标注
- 在时间线中每个问题左侧都有星标按钮（☆）和笔记按钮（📝）
- 点击星标按钮可以标注/取消标注问题，不会弹出笔记框
- 已标注的问题会显示实心星标（★）并变为金色

### 2. 置顶显示
- 标注的问题会自动置顶显示在时间线顶部
- 标注问题有特殊的金色背景和边框
- 标注问题在问题编号前会显示⭐图标

### 3. 筛选功能
- 点击时间线标题栏的⭐按钮可以只显示标注的问题
- 点击时间线标题栏的📝按钮可以只显示有笔记的问题
- 再次点击相同按钮可以返回显示所有问题
- 问题计数会显示当前筛选模式的数量

### 4. 笔记功能
- 点击📝按钮可以记录笔记内容，如果问题未标注会自动标注
- 可以记录为什么要标注这个问题或问题的重要性
- 笔记内容显示在问题下方的金色区域
- 点击📝按钮或笔记区域可以编辑笔记
- 有笔记的问题，📝按钮会变为蓝色
- 在标注筛选模式下，笔记按钮更加突出，显示为"📝 已记录"或"📝 添加笔记"

### 5. 边缘停靠和拖拽
- 时间线默认停靠在右边缘，鼠标悬停时自动展开
- 支持拖拽到屏幕任意位置，靠近边缘时自动停靠
- 停靠时显示小指示器，点击可展开时间线
- 支持左右两侧停靠，适应不同使用习惯

### 6. 长按快速编辑
- 在已标注的问题上长按3秒可快速弹出笔记编辑框
- 无需点击按钮，提供更便捷的编辑方式
- 在笔记筛选页面会显示相关提示

### 7. 跨页面访问
- 标注数据会自动保存到浏览器存储
- 当您访问同一个Gemini对话URI时，会自动加载之前标注的问题
- 页面加载时如果有标注问题，会显示金色通知提示

## 使用方法

### 标注问题
1. 在Gemini对话页面中，时间线会自动停靠在右边缘
2. 鼠标悬停在停靠指示器上展开时间线
3. 找到您想要标注的问题
4. 点击问题左侧的星标按钮（☆）进行快速标注
5. 按钮会变为实心星标（★）并变为金色，显示标注成功提示

### 添加笔记
1. 点击问题右侧的📝按钮
2. 如果问题未标注，会自动标注该问题
3. 弹出笔记编辑框，输入笔记内容（如"答案很不错"、"需要参考"等）
4. 点击"保存"或按Ctrl+Enter保存笔记

### 长按快速编辑
1. 在已标注的问题上长按鼠标3秒
2. 自动弹出笔记编辑框
3. 编辑完成后保存即可

### 筛选查看
1. 标注的问题会自动置顶显示
2. 点击时间线标题栏的⭐按钮可以只显示标注问题
3. 点击时间线标题栏的📝按钮可以只显示有笔记的问题
4. 标注问题有特殊的金色背景，笔记内容显示在问题下方
5. 在标注筛选模式下，每个标注项都有突出的笔记按钮

### 编辑笔记
1. 点击已标注问题右侧的📝按钮
2. 或者直接点击笔记区域
3. 或者长按已标注问题3秒
4. 在弹出的编辑框中修改笔记内容
5. 支持清空笔记（留空保存即可）

### 搜索功能
1. 在搜索框中输入关键词
2. 可以搜索问题内容或笔记内容
3. 匹配笔记的问题会高亮显示笔记区域

### 拖拽和停靠
1. 拖拽时间线标题栏可以移动到任意位置
2. 拖拽到屏幕边缘会自动停靠
3. 停靠后显示指示器，悬停或点击可展开
4. 支持左右两侧停靠

### 跨页面使用
1. 在一个Gemini对话中标注问题后
2. 当您重新访问同一个对话URI时
3. 系统会自动加载之前的标注和笔记
4. 页面右上角会显示通知，告诉您有多少个标注问题

## 视觉标识

- **未标注问题**: 灰色空心星标（☆）+ 灰色📝按钮
- **已标注问题**: 金色实心星标（★）+ 蓝色/灰色📝按钮
- **标注问题背景**: 金色渐变背景
- **有笔记问题**: 📝按钮显示为蓝色
- **笔记区域**: 金色背景区域，显示笔记内容
- **停靠指示器**: 边缘的彩色条带，显示📋图标
- **筛选按钮**: 标题栏的⭐和📝按钮，激活时高亮显示
- **通知提示**: 金色渐变通知框

## 技术特点

- 数据持久化：使用Chrome扩展的storage.sync API
- 跨页面同步：基于URL的pathname和search参数匹配
- 智能去重：避免重复标注相同内容的问题
- 实时更新：标注状态立即反映在界面上
- 自动过期：标注和笔记数据将在7天后自动清理，保持存储整洁
- 智能问题识别：优先识别完整问题容器，避免长问题被拆分
- 笔记搜索：支持在问题内容和笔记中进行搜索
- 边缘停靠：支持自动停靠到屏幕边缘，节省可用空间
- 拖拽定位：可以自由拖拽到任意位置
- 长按快编：长按3秒快速编辑笔记

## 注意事项

- 标注数据会同步到您的Chrome账户
- 只有相同的Gemini对话URL才会加载对应的标注
- 标注功能不会影响原有的时间线和搜索功能
- 标注数据将在7天后自动过期清理，无需手动管理
- 搜索框下方会显示"⭐ 标注问题将在7天后自动清理"的提示
- 在笔记筛选模式下会显示"💡 在普通界面长按标注3秒可快速编辑笔记"
- 长问题现在会被正确识别为单个问题，不再被拆分成多个条目
- 时间线默认停靠在边缘，不会占用过多屏幕空间

## 快捷操作

- **快速标注**: 直接点击星标按钮（☆），不弹出笔记框
- **添加笔记**: 点击📝按钮记录笔记内容
- **长按编辑**: 长按已标注问题3秒快速编辑笔记
- **筛选查看**: 点击标题栏⭐按钮显示标注，📝按钮显示笔记
- **拖拽定位**: 拖拽时间线到任意位置，靠近边缘自动停靠
- **快速跳转**: 点击通知直接显示标注问题
- **搜索功能**: 在搜索框中输入内容搜索问题和笔记
- **快速保存**: 在笔记框中按Ctrl+Enter快速保存
- **编辑笔记**: 点击📝按钮或笔记区域编辑

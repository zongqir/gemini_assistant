# Gemini Timeline Assistant 安装指南

## 在Chrome/Edge浏览器中安装插件

由于这是一个未发布到应用商店的开发版插件，您需要按照以下步骤手动安装：

### 步骤1：准备插件文件

确保您已经拥有完整的插件文件夹，包含以下文件：
- manifest.json
- content.js (593行，核心功能实现)
- style.css
- background.js
- popup.html
- README.md (中文文档)
- README_EN.md (英文文档)
- images/icon.svg
- INSTALL_GUIDE.md (本文件)
- demo (开发调试文件)

### 步骤2：开启开发者模式

#### Chrome浏览器
1. 打开Chrome浏览器
2. 在地址栏中输入 `chrome://extensions/` 并按回车
3. 点击页面右上角的"开发者模式"开关，将其打开

#### Edge浏览器
1. 打开Microsoft Edge浏览器
2. 在地址栏中输入 `edge://extensions/` 并按回车
3. 点击页面左下角的"开发人员模式"开关，将其打开

### 步骤3：加载已解压的扩展程序

1. 在扩展管理页面，点击"加载已解压的扩展程序"（Chrome）或"加载解压缩的扩展"（Edge）按钮
2. 在弹出的文件选择对话框中，找到并选择您的插件文件夹
3. 点击"选择文件夹"按钮

### 步骤4：确认安装成功

安装成功后，您应该能在扩展列表中看到"Gemini Timeline Assistant"插件，并且浏览器右上角会出现插件图标。

## 🎯 使用方法

### 基本使用

1. 打开Gemini对话页面：`https://gemini.google.com/`
2. 开始与Gemini对话
3. 插件会自动在页面右侧显示时间线容器
4. 时间线会实时显示您的所有问题，**新问题出现在顶部**
5. 点击时间线上的任意问题，页面会自动滚动到对应位置

### 🔍 搜索功能

1. 在时间线顶部的搜索框中输入关键词
2. 时间线会实时过滤显示匹配的问题
3. 搜索结果显示"匹配数/总数"格式
4. 清空搜索框可恢复显示所有问题

### 🚀 高级功能

- **大容量显示**：支持显示多达100个问题（而非传统的10个限制）
- **零过滤策略**：基于DOM结构识别，不会误过滤短问题（如"你好"、"范围"等）
- **智能更新**：检测Enter键、发送按钮、滚动事件等多种触发机制
- **现代化UI**：美观的渐变界面、悬停效果、点击反馈
- **可折叠设计**：点击标题栏的"−"/"+"按钮折叠/展开时间线
- **文本选择**：支持直接选择和复制问题文本
- **平滑滚动**：点击问题后的平滑滚动和高亮效果

## 🐛 调试与排错

### 查看插件日志

在Gemini页面上按F12键打开开发者工具，切换到"控制台"（Console）选项卡，查看以"Gemini Timeline:"开头的日志信息：

```
=== Gemini Timeline: 开始扫描用户问题（零过滤版本）===
Gemini Timeline: 选择器 "user-query-content" 找到 X 个元素
Gemini Timeline: ✅ 找到用户问题: "您的问题内容"
Gemini Timeline: 成功渲染 X 条问题
```

### 常见问题解答

#### Q: 为什么时间线没有显示？
A: 
1. 确保您在Gemini页面上（`gemini.google.com`）
2. 检查插件是否已启用
3. 尝试刷新页面
4. 查看控制台是否有错误信息

#### Q: 为什么显示"暂无问题记录"？
A: 
1. 确保您已经开始对话并提出了问题
2. 查看控制台日志了解扫描结果
3. 检查DOM选择器是否匹配当前页面结构
4. 尝试重新加载插件

#### Q: 搜索功能不工作？
A:
1. 确认搜索关键词拼写正确
2. 支持部分匹配，尝试使用更短的关键词
3. 检查问题文本是否包含搜索词
4. 清空搜索框重新尝试

#### Q: 点击问题无法跳转？
A:
1. 确保目标问题仍存在于页面中
2. 检查控制台是否有滚动错误
3. 尝试手动滚动到问题位置
4. 刷新页面重新尝试

#### Q: 时间线显示重复问题？
A: 这是正常现象，插件会自动进行智能去重处理，相同的问题只会显示一次。

### 性能说明

- **内存优化**：限制显示100个问题，避免内存溢出
- **防抖机制**：避免过度频繁的DOM扫描
- **智能去重**：基于文本指纹避免重复显示
- **冷却时间**：1秒冷却时间控制扫描频率

## 🔧 技术特性

### DOM选择器策略
插件使用以下选择器识别用户问题：
- `user-query-content` - 用户查询内容标签
- `.user-query-bubble-with-background` - 用户问题气泡
- `.query-text` - 问题文本容器
- `.query-text-line` - 问题文本行
- `[class*="user-query"]` - 包含user-query的类名
- `[class*="query-text"]` - 包含query-text的类名

### 更新触发机制
- **Enter键检测**：监听键盘Enter键发送问题
- **按钮监听**：检测发送按钮点击事件
- **滚动监听**：滚动到顶部时触发历史加载
- **DOM变化**：MutationObserver实时监听页面变化

## 🚨 注意事项

- **兼容性**：仅支持Chromium内核浏览器（Chrome、Edge、Opera等）
- **页面限制**：只在Gemini页面（`gemini.google.com`）上工作
- **隐私保护**：所有处理都在本地进行，不上传任何数据
- **更新建议**：建议定期更新以保持与Gemini页面的兼容性
- **性能影响**：插件对页面性能影响极小，采用了多项优化措施

## 📁 文件说明

- **content.js (593行)**：核心逻辑实现，包含问题扫描、时间线渲染、搜索功能
- **style.css**：时间线样式，支持现代化UI和文本选择
- **manifest.json**：插件配置，采用Manifest V3规范
- **background.js**：后台服务，处理插件生命周期
- **popup.html**：插件弹窗界面，提供基本控制功能

## 🗑️ 卸载插件

1. 打开浏览器的扩展管理页面：
   - Chrome: `chrome://extensions/`
   - Edge: `edge://extensions/`
2. 找到"Gemini Timeline Assistant"插件
3. 点击插件卡片上的"移除"按钮
4. 在确认对话框中点击"移除"

## 📞 技术支持

如果您在使用过程中遇到技术问题：

1. **查看日志**：打开控制台查看详细的运行日志
2. **检查版本**：确保使用的是最新版本的插件
3. **环境检查**：确认浏览器版本和Gemini页面是否正常
4. **重新安装**：卸载后重新安装插件
5. **反馈问题**：记录错误信息和复现步骤进行反馈

---

**开发目标**：为Gemini长对话提供高效、智能、纯净的问题导航体验，解决用户在长对话中难以快速定位历史问题的痛点。

希望这个插件能够显著提升您的Gemini使用体验！🚀